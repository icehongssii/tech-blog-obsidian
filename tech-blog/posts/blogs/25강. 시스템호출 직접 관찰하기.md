---
title: 25강. 시스템호출 직접 관찰하기
created: 2024-02-27 16:37
last-updated: 2024-03-08 00:50
tags:
  - CS
  - 책-혼공컴운
  - book
---

## 👯‍♂️ Intro & tl;dr

Brief introduction about the topic or what the post will cover.

--- 

## 👯‍♂️ 메인포인트1

안녕하세요

강우철입니다 이번 시간은 저번 시간에

배웠던 시스템 콜

시스템 호출을 조금 더 자세하게

직접 소스 코드로서 직접 관찰해보는

시간을 가져보는

추강이라고 보시면 됩니다 제가

앞선강에서 말씀드렸다시피 운영체제마다

시스템 콜의 종류는 다를 수가 있어요

근데 그 중에서도

리눅스의 시스템 콜 리눅스 운영체제

시스템 콜은 지금 여기 링크에서

심화자료가 담겨 있는이 링크에서

시스템 콜 여기를 눌러 보시면이

리눅스의 시스템 호출들을 제가

나름대로 정리를 해봤거든요 이거를 쭉

엄청 많아요 그쵸 근데 이것마저도

전부가 아니에요 이렇게

굉장히 많은 시스템 콜들이 있습니다

예를 들어서 리드라고 하는 시스템

호출은 파일 디스크립트 파일을

읽어드리는 시스템 콜이라고 보시면

되고요 뭐 이런 식으로

각각의 시스템 콜이 어떤 시스템

콜인지가 다 적혀 있고요

시스템 코어를 하면은 소프트웨어

인터럽트가 발생한다 그래서

운영체제 커널 영역의 적재되어 있는

운영

코드를 실행한다라고 제가 말씀을

드렸었죠

그렇죠 그래서 지금이

리눅스 커널 같은 경우에는 오픈

소스이기 때문에 모든 소스 코드가

전부 다 공개되어 있거든요

이런 식으로

해서이 시스템 콜이이 리눅스 시스이

리눅스 소스콘 상에 어디에 정의가

되어 있는지에 대한 그

라인 정보가 여기에 적혀 있으니까

이것도 참고하시면 되겠습니다 근데

참고로 말씀드리자면이 라인 넘버는

정확하지 않을 수가 있어요 왜냐면

리눅스에 리눅스 소스코드 또한

계속해서 변화하고 있기 때문에이 라인

넘버는 비교적 정확하지 않을 수는

있다 근데 아마 비슷할 것이다라고

보시면 됩니다 예를 들어서 이거 미드

라이트

리드라고 하는 시스템 코를 정의하는

부분은 이렇게 소스코드 향이 이렇게

정의가 되어 있다 이렇게

볼 수가 있습니다 그래서

리눅스 커널을 소스 코드상에서

관찰하고 싶으신 분들은

직접 이것도 참고해 보시면 좋을 것

같고요 이번 시간에는 일단 요것도

이제 궁금하신 분들은 시스템 콜도 쭉

보시길 바랍니다 아시겠죠 이번 시간에

할 거는 뭐냐면

리눅스

리눅스 지금 이게 제가 여기 있는

여기가 이제 리눅스거든요

정확히 말하면

우분투라고 하는 리눅스입니다

리눅스라고 나오죠이 리눅스에서

시스템 콜을 직접 관찰하는 방법에

대해서 말씀드려보도록 할게요

결론부터 말씀드리자면

```
strace ls 
```

S 트레이스

라고 하는

<mark style="background: #FF5582A6;">도구를 이용해서 시스템 콜을

관찰할 수가 있습니다

시스템 콜을 추적해 볼 수가 있어요  
</mark>  
예를 들어서

리눅스에서는

현재

현재이 경로에

폴더의 내용들을 보여줘라라고 하는

현재 경로에 파일과 폴더 목록들을

보여줘라라고 하는 명령어는 이런

명령어거든요 자 이렇게 ls라고

치면은 지금 현재 제가서 있는이

경로에

폴더와 파일들이 보이게 됩니다

근데 이것 또한

정확히 말하면

참고로 말씀드리면 오늘 지금이

강의에서 다루는 내용은

심화 강의이기 때문에 이해가 안

가시는 분들은 그냥 넘기셔도

괜찮아요 아시겠죠

참고로 말씀드리면 ls라고 하는

명령어도이 바이너리 파일입니다

실행이 가능한 파일이라는 거예요

어디에 위치에 있는 파일이냐면

빈이라고 하는 그 디렉토리 아래

ls라고 하는 명령어 ls라고 하는

파일로서 ls라고 하는 실행 가능한

파일로서 존재하는게이 ls라고 하는

명령어입니다

실제로이

빈의 LS 이거를 실행하면은

ls가 보이는게

실행되는게 보이죠 자 그렇다면이

ls라고 하는

명령어를 실행하는 것 또한

어떤 파일을 실행하는 거죠

어떤 프로그램을 실행하는 거죠

그렇죠

<mark style="background: #FF5582A6;">그러면이 LS

현재 경로에 모든 파일과 디렉토리

목록들을 보여 줘라고 하는이 명령어를

실행할 때도

시스템 콜들이 발생할 수가 있습니다

여러 번 발생할 수가 있어요</mark>  
<mark style="background: #FFF3A3A6;">  
그것들을 추적해 주는 그 도구가 S

트레이스라고 보시면 됩니다</mark>

S 트레이스라고 한 다음에

ls라고 하는 명령어가 위치에 있는이

경로를 써주시면이 ls라고 하는

명령어 ls라고 하는이 프로그램이

실행되면서

호출하는

시스템 콜들의 종류를 보여주게 됩니다

이런 식으로

가장 먼저 실행되는

시스템 콜은 얘에요 그리고 그

다음으로 실행되는 거는 예고 거기에

인자로서 이런 것들이 들어간다라고

보시면 돼요 그 다음으로 뭐 m 맵

그리고 뭐 이런 다양한 종류의 시스템

골드 아까 리드는 살짝 봤었죠 그렇죠

이런 시스템 콜들이 쭉 실행된다라고

볼 수가 있죠 지금 보시면은

l<mark style="background: #FF5582A6;">s라고 하면 굉장히 단순한

명령어라고 생각이 드실 수 있는데

지금 딱 보셔도

굉장히 다양한 시스템 콜들이

순간에 호출되는 것을 볼 수가 있죠

자 이런 것처럼 아무리 단순해 보이는

프로그램일지라도

시스템 콜은 굉장히 빈번하게 호출이

됩니다</mark>

다른 예시도 한번 들어볼까요 예를

들어서

hello라고 하는

C 언어를 만들고

간단하게

Hello

홍콩

헬로우 홍공이라고 하는

문자열의 출력해주는

간단한 프로그램을 만들어 보겠습니다

그 다음에 얘를

컴파일 해주고

실행해 주면 당연히 Hello

홍콩이라고 하는 너무 밑에 있어서 안

보이나요

Hello 홍공이라고 하는 글자가

보이겠죠 자 얘 또한

S 트레이스라고 하는 도구를 이용해서

시스템 콜을

호출해 보도록 하죠 자 Hello

홍공이라고 하는이 단 한 줄을

출력해주는이 단순한 프로그램인데도

불구하고 내부적으로는 이렇게나 다양한

시스템 콜들이

호출됩니다 자 이런 식으로

프로그램은 아주 빈번하게

시스템 콜을 호출하면서 실행된다라고

보시면 되겠습니다 아시겠죠 자

다음으로 살펴볼 예시는

macos에서의 시스템 콜을 한번

알아보도록 하겠습니다 참고로

말씀드리자면

<mark style="background: #FF5582A6;">리눅스와 macos는 운영체제의 결이

같습니다 정확히 말하면 이제 포식스

운영체제라고도 하는데

근데 중요한 거는 윈도우즈 운영체제의

경우에는 좀 결이 달라요 그래서

윈도우 운영체제에서 시스템 콜 호출

관계를 직접 추적해 보고 싶으면 뭐  
</mark>  
이런 식으로 뭐 또 다른

따로 윈도우용

시스템 콜 오픈 소스들을 막 상태에서

사용하는 거를

참고해 보시면 될 텐데 일단 이번

강의에서는 기본적으로 리눅스랑

맥os에서의 시스템 호출을

추적해 보는 연습을 보도록 할게요

아시겠죠 자

macos에서는

앞선 예시에서는

리눅스에서는 S 트레이스라고 하는

도구를 이용해서

시스템 콜을

추적을 했었죠

근데 macos에서는

디트러스라고 하는 툴을 통해서

시스템 콜을

추적해 볼 수가 있습니다 정확히

말하면 이거는 수도라고 하는 명령어가

필요해요 왜냐면 루트 권한이

필요하거든요 예를 들어서

앞서 말씀드렸던 것처럼

ls라고 하는 명령어가 있다고 한번

가정을 해 볼게요

얘 또한 바이너리의 ls라고 하는

파일로서 존재합니다 그래서 얘를

실행하기 위해서 수도 명령 수도

명령은 루트 권한 조금 더 높은

관리자 권한으로 실행 약간 이런 건

비슷한 거예요 그래서 수도

디트로스

LS 이렇게 하면은

짠 이런 식으로

macos에서의 시스템 호출들이 쭉

추적이 됩니다

아까랑 유사하죠 그쵸 근데 자세히

보시면 시스템 콜의

종류는 조금 다르다는 걸 볼 수가

있을 거예요 여기까지 이해가셨죠 그쵸

일반적인 소스 코드도 마찬가지입니다

예를 들어서

hello라고 하는

문자를 출력해주는 어떤 문자가 있었다

헬로라고 하는

문자를 출력해 주는 어떤 프로그램이

있었다라고 한다면

얘를

````
sudo dtruss
````
디트러스로

추적을 해본다라고 한다면

이렇게 해주면 되겠죠

여기까지 이해 가졌죠 그렇죠 얘 또한

굉장히 많은 시스템 코일들이

호출된다라고 보시면 되겠습니다 자

이렇게

리눅스와

MOS 운영체제에서 시스템 호출을

추적하는 방법에 대해서 말씀드렸습니다

만약에 내가 개발하고 실행하는

프로그램이 근원적인 단계에서 어떤

식으로 실행되는지 알고 싶다면 제가

이번 시간에 소개해드렸던 이런 툴들을

이용해서

시스템 콜 어떤 시스템 콜드로

호출하면서 어떻게 동작하는지를

분석해 보는 것도 좋은 연습이 될

거라고 믿습니다 아시겠죠 자 그러면

이번 강의는 여기까지 진행해 보도록

하겠습니다

참고로 말씀드리세요 참고로

말씀드리자면

디트러스 같은 경우에는 이게

바로 이런 식으로 제가 이번 시간에

보여드렸던 것처럼 수도 디트러스 그

다음에 뭐 예를 들어서

실행

뭐 이런 식으로 쓰면은 안 될 수가

있어요

문제가 발생할 수가 있습니다 근데

그럴 경우를 대비해서 제가 따로

링크를 남겨 드릴테니까 만약에

디트러스가 안 되시면은 그 링크를

참고해 보시면 되겠습니다 아시겠죠 자

그러면 이번 강의 진짜 마무리 짓도록

하겠습니다

다음 강의는 프로세스와

스레드에 대해서 알아보도록 하겠습니다

감사합니다

## 👯‍♂️ Conclustion

Summarize the main points and conclude your post.

--- 

## 👯‍♂️ Ref & LINKS TO THIS PAGE

-  [책/유튜브 인강-혼자 공부하는 컴퓨터구조+운영체제, 강민철, 한빛미디어](https://www.youtube.com/watch?v=kFWP6sFKyp0&list=PLYH7OjNUOWLUz15j4Q9M6INxK5J3-59GC)


