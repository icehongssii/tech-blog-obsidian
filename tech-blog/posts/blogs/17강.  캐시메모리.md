---
title: 17강.  캐시메모리
created: 2024-02-27 13:40
last-updated: 2024-03-08 00:43
tags:
  - CS
  - 책-혼공컴운
  - book
---

## 👯‍♂️ Intro & tl;dr

Brief introduction about the topic or what the post will cover.

--- 

## 👯‍♂️ 메인포인트1

안녕하세요 강철입니다 자 이번

시간에는

캐시 메모리에 대해서 학습해 보도록

하겠습니다

캐시 메모리 사실 캐시 메모리는 이번

장의 주제인 메모리 즉 주기억

장치하고

크게 연관되어 있지는 않지만 너무

중요한 개념이라서 따로 뺐다라고

보시면 돼요 아시겠죠

자 일단 이거부터 말씀을 드리면서

이번 강의를 시작해 보도록 하겠습니다

<mark style="background: #FF5582A6;">일단 cpu가 메모리에 접근하는

속도는

cpu의 연산 속도보다 압도적으로

느립니다 이거는 한번 말씀드린 적이

있었던 거 같은데

cpu가

메모리에 접근하는 거는 어떻게 보면

뭐 레지스터에 접근하는 것보다 너무

느리기 때문에

어떤 관점에서 보면 성능상에 큰

손해라고도 볼 수 있</mark>어요 아시겠죠

이거를 먼저

깔고 시작을 해보도록 하겠습니다 일단

이번 강의의 주제인 캐시 메모리에

대해서

이해하시려면이 저장장치 계층구조라고

하는 개념에 대해서 먼저 이해를 하고

계셔야 됩니다 저장장치 계층구조란

지금 보이시는이 두 가지 명제를

의미하는데요

<mark style="background: #FF5582A6;">첫 번째는

cpu와 가까운 저장장치는 일반적으로

그리고 상대적으로 속도가 빠르고

그리고

멀리 있는 저장장치는

느리다 이게 첫 번째고요 두 번째는

속도가 빠른 저장장치는 일반적으로

그리고 상대적으로 저장 상당히 작고

가격이 비싸다 이게 두 번째입니다이  
</mark>  
두 가지가 저장장치 계층 구조의

개념이라고 보시면 돼요 자 이거에

대해서 일단 레지스터와 메모리 즉 램

그리고 usb 보조기업 장치죠

usb이 세 가지를 한번 비교를

해보도록 할게요 일단

cpu와 가장 가까운 레지스터는

일반적으로

램보다 용량은 작지만

접근 시간이이 세 가지 중에서 가장

빠르고 가격도 비쌉니다 그리고 USB

메모리보다 cpu에 더 가까운 램은

USB 메모리보다 당연하게도 접근

시간이 훨씬 더 빠르지만 같은

용량이라고 할지라도 가격은 훨씬 더

비쌉니다 지금 인터넷에다가 뭐

16기가 파이트짜리 메모리 그리고

16gb짜리

usb의 가격을 비교해 보시면 바로

알 수 있을 거예요 아시겠죠 이러한

명제를 따르고 있기 때문에 이러한

차이점이 나타나는 것이다라고

이해하시면 되겠습니다

아시겠죠

즉 정리하자면

낮은 가격대의 대용량 저장장치를

원하신다면

느린 속도는 감수를 해야 되고요

상대적으로 느린 속도는 감소하셔야

되고요

빠른 속도에 저장 장치를 원하신다면

상대적으로

작은 용량과 비싼 가격은 감소하셔야

됩니다

몇 가지 이해하셨죠 그쵸 이거를

그림으로 표현하면 다음과 같이 표현을

할 수가 있어요 이거는

cpu에 얼마만큼이 저장장치가

가까운가를 기준으로이 저장장치 계층

구조를 그려볼 수가 있습니다 지금

여기에 제가 그려드린 이러한

저장장치들은 지금까지 여러분들이

학습하신 저장장치를 바탕으로

계층 구조를 그렸다라고 보시면 돼요

위로 갈수록

속도는 빠르고요 위로 갈수록 용량은

작아지고요 가격은 비싸집니다

여기까지 이해하셨죠 그쵸 이렇게이

각각의 저장 장치들의 장단점이

명확한데 어느 하나의 저장 장치만 쓸

수는 없겠죠 그렇기 때문에 일반적으로

컴퓨터에서는이 모든 저장 장치를

계층적으로

즉 장단점에 맞게 잘 배치해서

계층적으로 사용을 하게 됩니다

몇 가지 이해가셨죠 그쵸

참고로 말씀드리자면이 저장장치

계층구조라고 제가

책과 강의에서 표현을 하지만 이거는

영문으로 나타내면

메모리 하이렉트라고 합니다 이걸

메모리 계층 구조라고도 표현을 해요

근데 여기서

메모리라고 하는 용어는

램이 아니라 일반적인 저장 장치를

의미합니다 그래서이 책에서는

용어의 혼동을 막 방지하기 위해서

저장장치 계층구조라고 사용했다라고

이해하시면 되겠습니다 아시겠죠

자 그럼 이제 캐시 메모리에 대해서

설명할 때가 됐습니다

캐시 메모리는 어떤 메모리냐면요

cpu와

메모리 사이에 위치한

cpu와

메모리 사이에 위치한

레지스터보다는 용량이 크고

메모리보다는 용량이 작은 그리고

메모리 보다는 빠른

SM 기반의 저장장치가 바로 캐시

메모리다라고 보시면 돼요 이게 캐시

메모리의 정의라고 정리하시면

되겠습니다

즉

cpu의 연산 속도와

메모리에 접근 속도를

조금이나마 줄이기 위해서 탄생한

저장장치가 바로 캐시 메모리다라고

보시면 되겠습니다

cpu의 연산 속도가 너무 빨라서

메모리에 접근하는 속도가 상대적으로

너무 느리게 느껴졌잖아요 그렇죠

그래서

메모리보다는 조금 더 빠른 메모리를

용량은 작지만 조금 더 빠른 메모리를

cpu와 메모리 사이에다가 위치를

시킨 거예요

그러면

cpu의 연산 속도와

메모리에 접근 속도를 조금이라도

완화할 수가 있겠죠 왜냐면 여기에

있는 것들을

<mark style="background: #FF5582A6;">메모리에 저장되어 있는 값들의 일부

캐시 메모리에 저장을 한다면

굳이 멀리까지 메모리에 왔다 갔다 할

필요 없이 캐시 메모리에 있는 값과

주고 받으면 되니까요

그렇죠

달리 말해서

cpu가 매번 메모리에 왔다리 갔다리

하는 거는 시간이 오래 걸리니까

메모리에서 사용할 일부 데이터를 미리

캐시 메모리로 갖고 와서 저장해서

쓰자 이게 바로 캐시 메모리의

취지입니다</mark>

여기까지 이해하셨죠 이걸 비유를

하자면

cpu가 어떤 데이터에 접근하는 것

즉 메모리에 접근하는 것을

물건을 사러 가는 것에 한번 비유를

해 볼게요

그렇다면

메모리는

용량이 크죠 메모리는 용량이 큽니다

캐시 메모리에 비해서 그렇기 때문에

메모리는

물건은 정말 많지만

직관은 멀리 떨어져 있어서이 집과는

멀리 떨어져 있어서

왕복이 오래 걸리는 대형마트에 비유할

수가 있고요

트가 이게 잘렸네요 어쨌든 대형

마트에 비유할 수가 있고요

캐시

메모리는이 메모리에 비해서 상대적으로

용량이 작죠

그렇죠

즉

물건의 개수가 많지는 않아도 집과

가까이 있는 편의점에도 빗댈 수가

있습니다 여러분들이 어떤

필요한 물건이 있을 때

굳이 대형마트까지 멀리 왔다 갔다 할

필요 없이 편의점에 원하는 물건이

있으면 빨리 갔다 올 수가 있잖아요

그렇죠 그런 거랑 똑같다고 보시면

됩니다 아시겠죠

캐시 메모리를 사용할 경우와 사용하지

않을 경우에는 당연하게도 지금

보이시는 것처럼

속도 상해 즉 성능상에

차이점이 있을 수밖에 없습니다

그렇기 때문에 현대 대부분의 cpu는

곁에

캐시 메모리를 두게 됩니다

여기까지 이해가셨죠 그리고 캐시

메모리는

cpu가 자주 사용할 법한

메모리에 저장되어 있는 값의 일부를

갖고 와서 저장을 하고 있고요

아시겠죠

자 그럼 캐시 메모리에 대해서 설명을

드렸으니까

캐시 메모리까지 반영한 저장장치 계층

구조를 다시 한번 그려보자면 다음과

같이 그릴 수가 있습니다 가장 밑에는

보조기억 장치 즉 속도는 가장

느리지만 용량은 가장 크고 가장

저렴한 보조기업 장치가 있고요 그

다음에는

메모리 그리고 cpu와 메모리 사이에

위치한게 캐시 메모리니까이 사이에

캐시 메모리를 넣을 수가 있겠죠

그리고 가장 빠른 레지스터 CPU

내부에 있는 레지스터 이렇게 그릴

수가 있습니다

참고로 조금 있다 말씀드리겠지만

캐시 메모리 중에서 CPU 내부에

있는 캐시 메모리도 있긴 합니다

하지만 레지스터가 더 빨라요 아시겠죠

어쨌든 캐시 메모리는 레지스터 즉

cpu와 메모리 사이에 위치한

cpu의 연산 속도와 메모리에 접근

속도를

차이를 줄이기 위한 저장장치다 SM

기반에 저장장치다 이렇게 정리하시면

되겠습니다

아시겠죠

캐시 메모리는 하나가 아니에요

계층적으로 구성할 수가 있습니다

CPU 외부에 위치에 있을 수도

있고요

CPU 내부에 있을 수도 있습니다

이거를 계층적 캐시 메모리라고

하는데요 이거를 L1 L2 l3

캐시라고 부릅니다

L1 캐시 같은 경우에는

레지스터보다 용량은

크지만 L2 캐시보다는 작아요 하지만

가장 빠르죠

cpu가 가장 가까운 곳에 위치해

있으니까요

l2캐시의 경우에는

L1 캐시보다는 용량이 크지만

l3보다는 작습니다

근데 l3보다는 조금 더 빠르게

접근할 수가 있어요 그리고 일반적으로

L1 캐시와

L2 캐시는

코어 내부에 있고요 LC 캐시는이

CPU 코어 외부에 위치해 있는

경우가 많습니다 어쨌든 이게 L1

캐시와 L2 캐시 이렇게 계층적으로

캐시 메모리를 구성하기도 한다라고

이해하시면 되겠습니다 그리고

마지막으로 LCD 캐시는

메모리보다는 용량이 작지만

l1이나 l2보다는

용량이 크다 그리고

메모리에 비

당연하게도 접근 속도는 더 빠르다라고

정리하시면 되겠습니다

참고로 이렇게 계층적으로 캐시

메모리를 구성하는게 현대 CPU

캐시 메모리 설계에서 가장 일반적인

설계 방식이기는 합니다 아시겠죠

L1 L2 l3 캐시 뭐 이런 식으로

분리를 하는 것이죠

레벨 1 레벨 2

레벨 3

아시겠죠 어쨌든 캐시 메모리는

일반적으로 이제

계층적으로 이렇게 구성이 되기도

한다라고 이해하시면 되겠습니다

참고로 멀티 프로세서의 캐시 메모리

같은 경우에는 이런 식으로 구성되기도

해요

SD 캐시 같은 경우에는 각각의

코어들이 공유하는 형태로 사용되기도

하고

L1 l2는

각각의 코어의 이제 위치해 있는

경우가 많습니다 이럴 경우에 참고로

말씀드리면 이거는 한 귀로 듣고 한

귀로 흘리셔도 괜찮아요

<mark style="background: #FF5582A6;">참고로 말씀드리자면

멀티코어 프로세서에서의 캐시 메모리

같은 경우에는요

코어마다 이렇게 L1 캐시 L2 캐시

이렇게

코어마다 이렇게 따로 두기 때문에

각각의 캐시 메모리들이

각각의 코어에 있는이 캐시들이

서로 다른 내용을 저장하게 될 수도

있습니다 왜냐하면  
</mark>  
cpu가 작업을 막 하는 도중에

애원캐시에 있는 내용을 변경하기도

하고

L2 캐시에 있는 내용을 변경하기도

하겠죠

그렇죠

l3 캐시에 있는 내용을 변경하기도

할 거고

메모리에 있는 내용을 변경하기도

하겠죠

그렇죠 근데

이 코어에서

A1 캐시를 변경했는데이 코어에서는

그 사실을 모를 수가 있잖아요

그렇죠 즉 데이터 일관성이 깨질 수가

있는 거죠 자 그렇기 때문에

<mark style="background: #FF5582A6;">멀티코어 프로세서에서는 캐시 메모리가

모두 동일한 내용을 갖게끔이 싱크를

맞춰주는 것이 아주 중요한 문제가</mark>

됩니다

여담으로 말씀드린 거니까 그냥 한

귀로 듣고 한 귀로 흘리셔도 괜찮아요

아시겠죠

어쨌든 멀티코어 프로세서의 경우에는

이렇게 코어마다 따로 캐시를 갖고

있는 경우도 있고 이렇게 SD 캐시를

공유하는 형태로 사용될 수가 있다라고

이해하시면 되겠습니다 최근에는 이렇게

사용하는 편이에요 공유하는 캐시

메모리가 크게 하나 있고 그리고

바깥에 메모리가 있고

각각이 이제 코어가 갖고 있는 캐시

메모리가 있고 이런 식으로 설계가

됩니다 일반적으로 아시겠죠

자 그리고 캐시 메모리 중에서 L1

캐시 있죠 L1 캐시는

cpu가 가장 가까이 위치한 캐시

메모리 중에서 즉

애원캐시 L2 캐시 SD 캐시 중에서

가장 빠른 캐시 매물이라고 말씀드렸죠

그렇죠 근데 이거를

조금이나마 애원캐시를

조금이라도 더 빨리 만들기 위해서

명령어만을 담고 있는 캐시 애원캐시

데이터만을 담고 있는

A1 캐시 이런 식으로

l1d 뭐 데이터 캐시

L1 인스트럭션 명령어 캐시 이런

식으로

명령어만을 담기 위한

애원캐시 매물이

데이터만을 담기 위한

에어본 캐시 메모리 이런 식으로 어

관리를 하기도 합니다 이걸 분리형

캐시라고도 불러요 아시겠죠 이런게

있다

정도로만 눈도장 찍으시면 될 것

같습니다 아시겠죠

계층적인 캐시 메모리까지 반영한

저장장치 계층구조는 다음과 같이

표현할 수가 있겠죠

<mark style="background: #FF5582A6;">자 그럼 캐시 메모리에 있어서 너무

중요한 원리 중에 하나인 참조지역성의

원리

로컬리티 오브 레퍼런스라고도 합니다

어쨌든이 참조 지역성의 원리에 대해서

말씀드려보도록 하겠습니다이 참조

지역성의 원리는 나중에 이제</mark>

프로그래밍을 하실 때도

고려를 하실 법한 요소들이 들어있기

때문에 한번 들어보시면 아마 재미가

있을 거예요 아시겠죠 자

앞서 말씀드렸듯이 캐시 메모리는

메모리보다 용량이 작습니다

그렇기 때문에

당연하게도

메모리에 있는 모든 내용들을 다

저장할 수는 없어요

메모리에 있는 일부 내용들을 저장할

수밖에 없거든요

메모리에 있는 모든 내용들을 저장할

수밖에 없기 때문에 일부 내용들을

복사해서 갖고 올 수밖에 없습니다 자

그렇다면

캐시 메모리는이 메모리에 있는 많은

정보 중에서 뭘 저장해야 될까요

어떤 것들을 갖고 와서 저장을 해야

될까요

<mark style="background: #FF5582A6;">cpu가 자주 사용할 법한 내용을

예측을 해서 갖고 와서 저장을 해야

됩니다

cpu가 자주 사용할 법한 데이터들을

메모리에서 미리 갖고 와야 돼요 이게

중요합니다 그리고 이렇게

cpu가 자주 사용할 법한 데이터들을

예측해서 저장을 했는데

cpu가

실제로 그 데이터를 사용했을 경우 즉

예측이 들어맞았을 경우

캐시 메모리에 갖고 온이 데이터들을

실제로 cpu가 활용했을 경우 이걸

어떻게 표현을 하냐면

캐시 히트</mark>라고도 말을 합니다 예를

들어서 캐시 메모리는

6000이라고 하는 값을

cpu가 쓸 거라 쓸거다라고 예측을

해서 저장을 하고 있었는데

실제로도 이게 사용이 된 거예요

이렇게 이제 예측에 들어맞는 경우를

캐시 히트라고 표현을 합니다

당연하게도이 경우에는

메모리에 접근하는 것보다

성능이 높아지겠죠 반대로 예측이

틀렸을 경우도 있겠죠 예를 들어서

캐시 메모리가 6000이라고 하는

값을 cpu가 사용할 것이라고 예측을

해서 저장을 했는데

이게 사용되지 않은 경우에요 이럴

경우에는 cpu는 어쩔 수 없이

메모리에 접근을 해야겠죠 이런 상황을

캐시미스라고 합니다

당연하게도 앞서 보여드렸던

캐시트 상황보다

성능이 떨어질 수밖에 없겠죠

그렇죠 자 이렇게 이제

캐시 메모리는

결과적으로 cpu가 자주 사용할 법한

대상을 예측해서 저장을 하게 되는데

참고로

캐시 적중률이라고 하는 개념이

있습니다

cpu가 메모리에 접근하는 전체 횟수

예를 들어서 그 캐시 히트 캐시비스

이거 두 개 합치면은

<mark style="background: #FF5582A6;">메모리에 접근해야 되는 모든 상황이

가질 수들이 나오겠죠 자 이거를

분모로 하고

실제로

캐치 캐시 히트의 수를

분자로 해서이 캐시 적중률이라고 하는</mark>

것을 계산하기도 합니다 이게 높으면

높을수록 당연하게도

성능이 높겠죠 왜냐면 캐시 히트

횟수가 많다는 거잖아요 그만큼

굳이 멀리까지 메모리에 왔다 갔다 할

필요가 없다는 것이고 더 빨리 내가

원하는 데이터에 접근할 수 있다는

것과 같겠죠

그렇죠 자 이거를 캐시 적중

합니다

참고로 말씀드리면 요즘 cpu의 캐시

적중률은 대략 못해도 80% 이상은

넘깁니다 90% 이상 넘기는 경우도

많아요 아시겠죠 어쨌든

캐치 적중률을 높여야 됩니다 캐시

메모리를 10분 활용하기 위해서는

즉 메모리에 왔다리 갔다리 하는

시간을 많이 줄이고

빠르게

데이터에 접근하기 위해서 빠르게 쓸

필요가 원하는 데이터를 갖고 오기

위해서는

캐시 적중률을 높여야 돼요 다시

말해서

cpu가 사용할 법한 데이터를 잘

예측을 해야 됩니다

자 cpu가 사용할 법한 데이터를

예측하는

방법이 원칙이

참조 지역성의 원리라고 보시면 돼요

참조 지역성의 원리란

cpu가 사용할 법한 데이터를

예측하는 어떤 원칙이라고 보시면 돼요

아시겠죠 자 여기에 대해서

말씀드릴게요 

<mark style="background: #FF5582A6;">자 참조 지역성의 원리는xx cpu가 메모리에 접근할 때 어떤 주된 경향성을 바탕으로 만들어진

원리인데 어떤 경향성이냐면 바로

밑에이 두 가지 경향성을 바탕으로

만들어진 원리다라고 보시면 돼요 첫

번째

경향성은 뭐냐면

cpu는 최근에 접근했던 메모리

공간에 다시 접근하는 경향이 있다 그

두 번째 경향은 뭐냐면

cpu는

접근한 메모리 공간에 근처에

접근하는 경향이 있다 이게 두 번째

경향입니다 자이 두 가지 경향을

바탕으로 만들어진 원리가

원칙이 바로

참조 지역성의 원리다라고 보시면  
</mark>  
됩니다

캐시 메모리는이 두 가지 경향성 즉

참조 지역성의 원리를 바탕으로

자주 사용할 법한 대상을 예측해서

저장한다라고 보시면 돼요 자

첫 번째 경향성 즉 최근에 접근했던

메모리 공간에 다시 접근하려고 하는이

경향성에 대해서 알아봅시다 이거는

어렵지 않습니다

프로그래밍 언어를 한 번쯤 학습해

보신 분들이라면

변수가 무엇인지 알고 계시는 분들이

많을 거예요

변수

변수가 뭐였죠

자주 사용할 법한 데이터를 저장해

두고 그 데이터 저장된 그 공간에

이름을 붙인 거죠 예를 들어서 이런

코드가 있다라고 가정을 해 볼게요

이게 무슨 뜻인지 몰라도 됩니다 그냥

구구단 2단으로 출력하는 코드예요

그냥 여기서 이게 변수입니다

넘이라고 하는 정수형

넘이라고 하는 이름을 갖고 있는

변수를 만들 건데이 넘이라고 하는

변수 안 했다가는 2라고 하는

데이터를 저장할거다라고 이제 변수를

만들어 준 거예요 자 여기서 바로

밑에 보시면 그냥 딱 봐도 이게 무슨

뜻인지 몰라도 너미라고 하는 값이

여러 번 쓰인다는 걸 알 수가 있겠죠

다시 말해서이 코드를 실행할 때이

넘이라고 하는 변수의 주소 공간에

다시 한번

접근하는 경향이 보이죠

그렇죠

그러니까 변수에 다시 접근했다는 거는

그냥 그 변수가 저장된 주소 공간을

다시 한번 참조한다는 것과 같잖아요

자 이런 식으로 최근에 접근했던

메모리 공간에 다시 접근하려고 하는

경향이 있습니다 자 두 번째 경향성

즉 접근한 메모리 공간 근처를

접근하려고 하는 경향은 공간

지역성이라고도 표현을 합니다

cpu가 실행하려는 프로그램은 보통

관련된 데이터들끼리 보통 한데

모여있는 경우가 많아요 예를 들어서

지금 보이시는 것처럼

워드프로세서 프로그램은

월드 프로세서끼리 모여 있고

웹 브라우저 프로그램은 모여 있고

게임도 게임 그 프로그램이 저장된

근처에 모여서 저장되어 있죠 그리고

워드프로세서

프로그램 내부에만 하더라도이

워드프로세서를 이루고 있는 다양한

기능들이 있겠죠

근데이 기능들은

관련된 기능들마다 이렇게 모여서

저장이 됩니다 그럼 당연하게도

입력 기능을 사용할 때는

워드프로세서의 입력 기능을 사용할

때는

당연히이 입력 기능이 모여 있는 곳

근처를 자주 참조할 거고요

cpu는

만약에 자동 저장을 해야 된다 그럼

자동 저장 기능이 모여 있는 곳을

집중적으로 참조를 하겠죠

자 이런 식으로

cpu는

접근한 메모리 공간 근처를

접근하려고 하는 경향이 있습니다 자

캐시 메모리는이 두 가지 경향성을

바탕으로

즉이 참조 지역성의 원리를 바탕으로

최근에 접근했던 메모리 공간이 그

중에서 자주 참조될 법한 내용들을

캐시 메모리에 미리 갖고 와서 저장을

하고요 그리고

접근한 메모리 공간에 근처에 있는유

데이터들을 미리 갖고 와서 저장을

하게 됩니다 그런 식으로

캐시 적중률을 높인다

성능을 향상시킨다라고 보시면

되겠습니다

아시겠죠 자 그러면 이번 강의는

여기까지 진행하도록 하겠습니다

아시겠죠 그럼 저는 다음 강의로

뵙겠습니다

감사합니다

## 👯‍♂️ Conclustion

Summarize the main points and conclude your post.

--- 

## 👯‍♂️ Ref & LINKS TO THIS PAGE

-  [책/유튜브 인강-혼자 공부하는 컴퓨터구조+운영체제, 강민철, 한빛미디어](https://www.youtube.com/watch?v=kFWP6sFKyp0&list=PLYH7OjNUOWLUz15j4Q9M6INxK5J3-59GC)



